<script>
  // 定义一个商品对象，包含价格和数量
  let quantity = 2;

  let product = {
    price: 10,
    quantity,
  };

  // 总价格
  let total = 0;
  // 计算总价格的函数
  function effect() {
    total = product.price * product.quantity;
  }

  effect();
  // 第一次打印
  console.log(`总价格：${total}`); // 20

  // 监听对于 product 的 quantity 属性的操作
  Object.defineProperty(product, "quantity", {
    set(newVal) {
      console.log("setter");
      // 不能是 product.quantity = newVal，因为这样会重复触发 set 行为
      quantity = newVal;

      // 重新触发 effect
      effect();
    },
    get() {
      console.log("getter");
      // 以 quantity 变量的值作为 product.quantity 的属性值
      return quantity;
    },
  });
</script>
